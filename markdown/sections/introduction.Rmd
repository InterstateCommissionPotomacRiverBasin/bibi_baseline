---
title: "Introduction"
author: "Zachary M. Smith"
date: "December 26, 2017"
output: html_document
---

## Dependency Management

Load the necessary packages into the environment [@DowledatatableExtensions2017; @WickhamhttrToolsWorking2017; @GrolemundDatesTimesMade2011; @WickhamstringrSimpleConsistent2017; @WickhamreadxlReadExcel2017; @LangRCurlGeneralNetwork2016; @WickhamdplyrGrammarData2017; @WickhamtidyrEasilyTidy2017; @HenrypurrrFunctionalProgramming2017; @Wickhamggplot2ElegantGraphics2009;
@ChengleafletCreateInteractive2017; @OomsjsonlitePackagePractical2014; @MullerrprojrootFindingFiles2017. 
```{r load_packages, message=FALSE}
library(dplyr)
library(tidyr)
library(ggplot2)
library(purrr)
library(stringr)
library(leaflet)
library(lubridate)
library(readxl)
library(httr)
#library(RCurl)
library(data.table)
library(jsonlite)
library(rprojroot)
```

The dependency management system package, __packrat__, is used in this project to make it possible to replicate the results in this document one other computers and if the project is revisted in several years. As packages are updated functions may become defunct or a function may not respond in a similar fashion to previous versions of the package. When collaborating or revisting the document sometime in the future, it is difficult to re-create the exact environment used by a collaborator or by past-you to create the document. __packrat__ aims to take a snapshot of the current and environment so it can be easily reproduced. As an added bit of precausion, `sessionInfo()` is printed to provide the necessary information for re-creating the environment if __packrat__ fails.
```{r}
sessionInfo()
```

Data for this document are located in various files. The object `project.dir` represents this R-projects root directory and will be used as the root of the file path throughout the document.
```{r}
project.dir <- rprojroot::find_rstudio_root_file()
```

## Custom Functions

The `clean_string()` function modifies character objects by removing leading/trailing white space, converting all characters to lower case, and replacing all spaces (" ") with an underscore ("_"). These specifications eliminate common typos and standardize character objects.
```{r}
clean_string <- function(x) {
  x %>% 
    stringr::str_trim() %>% 
    tolower() %>% 
    stringr::str_replace_all("\\s+", " ") %>% 
    stringr::str_replace_all(" ", "_") %>%  
    if_else(. == "", as.character(NA), .)
}
```

The `clean_up()` function is a wrapper for `clean_string()`. This function applies `clean_string()` to the column headers and character columns of data frames. Again, this process standardizes character values and makes it easier work with the data.
```{r}
clean_up <- function(x) {
  x %>% 
    rename_all(clean_string) %>% 
    mutate_if(is.character, funs(clean_string))%>% 
    distinct()
}
```
